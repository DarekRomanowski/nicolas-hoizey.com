---
layout: default
title: Pas de connexion
---

<div class="error offline clearfix">
  <p class="icon">{% asset icon-offline.svg %}</p>
  <p class="info">Désolé, <strong>vous ne semblez pas être connecté</strong>, et le billet auquel vous essayez d'accéder n'est pas dans votre cache.</p>
</div>
<p>Voici les billets disponibles dans votre cache :</p>
{% for post in site.posts limit:1 %}
<script>
var lastPostUrl = '{{ post.url }}';
</script>
  <article class="latest">
    <h2><a href="{{ post.url }}">{{ post.title }}</a></h2>
    {% include article-header.html page=post %}
    {{ post.excerpt | strip_footnotes }}
  </article>
{% endfor %}
<ul id="cache-entries"></ul>

<script>
var cacheEntriesUl = document.querySelector('#cache-entries');

window.caches.keys().then(cacheNames => {
  cacheNames.forEach(cacheName => {
    if (/\:\:pages/.test(cacheName)) {
      window.caches.open(cacheName).then(cache => {
        return cache.keys();
      })
      .then(requests => {
        requests.forEach(request => {
          if (request.url !== lastPostUrl) {
            addRequestToList(cacheName, request);
          }
        });
      });
    }
  });
});

function addRequestToList(cacheName, request) {
  var url = request.url;

  var linkElement = document.createElement('a');
  linkElement.href = url;
  linkElement.textContent = url.replace(/https:\/\/nicolas-hoizey\.com/, '');

  var liElement = document.createElement('li');
  liElement.appendChild(linkElement);

  cacheEntriesUl.appendChild(liElement);
}
</script>
